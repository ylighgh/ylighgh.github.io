=== 安装

.配置zabbix 5.0的源
[source,bash]
----
rpm  -Uvh  https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/5/x86_64/zabbix-release-5.0-1.el5.noarch.rpm

sed -i 's#http://repo.zabbix.com#https://mirrors.aliyun.com/zabbix#g' /etc/yum.repos.d/zabbix.repo
----

.安装Zabbix-server
[source,bash]
----
yum -y install zabbix-server-mysql  zabbix-web-mysql zabbix-agent
----

.导入zabbix初始数据
[source,bash]
----
zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -pzabbix zabbix
----



.创建数据库
[source,bash]
----
mysql -uroot -pgeek -e "create database zabbix character set utf8 collate utf8_bin;create user 'zabbix'@'localhost' identified by 'zabbix';grant all privileges on zabbix.* to 'zabbix'@'localhost';flush privileges;"
----
. 增加Nginx Host设置
[source,bash]
----
cat << EOF > /etc/nginx/conf.d/zabbix.conf
server {
    listen       8088;

    server_name  zabbix.com;
    root         /data/web/zabbix.com;
    error_log /var/log/nginx/zabbix.com_error.log;
    access_log /var/log/nginx/zabbix.com_access.log  main;

    location / {
        try_files \$uri /index.php\$is_args\$query_string;
    }

    location ~ \.php\$ {
        try_files \$uri \$uri/ 404;

        fastcgi_pass unix://run/php-fpm/www.sock;
        include fastcgi.conf;
    }
}
EOF
----

.重载Nginx配置
[source,bash]
----
nginx -s reload
----

.准备Zabbix
[source,bash]
----
mkdir -p /data/web/zabbix.com
----

.使用 -O 参数指定保存文件名，会强制覆盖已经存在的文件
[source,bash]
----
wget https://cdn.zabbix.com/zabbix/sources/stable/5.0/zabbix-5.0.8.tar.gz -O zabbix-5.0.8.tar.gz
tar xf zabbix-5.0.8.tar.gz
mv zabbix-5.0.8/* /data/web/zabbix.com
rm -rf zabbix-5.0.8
chown -R nginx:nginx /data/web/zabbix.com
chmod -R 755 /data/web/zabbix.com
----


